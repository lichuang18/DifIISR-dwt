测试 DWTModelAllBandsLearnableTorch 修复
============================================================
============================================================
1. 测试权重形状
============================================================
self.down.weight.shape: torch.Size([9, 1, 3, 3])
  期望: [9, 1, 3, 3] (groups=9 时第二维是1)
self.up.weight.shape: torch.Size([9, 1, 4, 4])
  期望: [9, 1, 4, 4] (groups=9 时第二维是1)
✓ 权重形状正确

============================================================
5. 测试DWT/IDWT一致性（不经过可学习层）
============================================================
一级DWT+IDWT重建误差: 0.0000004768
二级DWT+IDWT重建误差: 0.0000004768
✓ DWT/IDWT完美可逆

============================================================
2. 测试编解码功能
============================================================
Input shape: torch.Size([2, 3, 256, 256])
Latent shape: torch.Size([2, 21, 64, 64])
Reconstructed shape: torch.Size([2, 3, 256, 256])
Reconstruction error: 4.291489
✗ 重建误差过大: 4.291489
  可能原因: encode和decode的DWT/IDWT实现不一致

============================================================
3. 测试梯度回传
============================================================
self.up.weight.grad is not None: True
self.down.weight.grad is not None: True
self.up.weight.grad.abs().mean(): 0.000000
self.down.weight.grad.abs().mean(): 0.000000
✓ 梯度回传正常

============================================================
4. 测试初始化值
============================================================
down 卷积权重 (应该中心点为1):
  通道 0: 中心值 = 1.0000
  通道 1: 中心值 = 1.0000
  通道 2: 中心值 = 1.0000

up 反卷积权重 (应该接近双线性插值):
  通道 0 的权重:
tensor([[0.0625, 0.1250, 0.1250, 0.0625],
        [0.1250, 0.2500, 0.2500, 0.1250],
        [0.1250, 0.2500, 0.2500, 0.1250],
        [0.0625, 0.1250, 0.1250, 0.0625]], grad_fn=<SelectBackward0>)

✓ 初始化值正确

============================================================
所有测试完成!
============================================================
